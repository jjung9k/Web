<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS arrow function</title>
</head>
<body>
    
    <script>
        // 화살표 함수 - 파이썬의 람다같은 역할 수행

        // 1. 선언적 함수 
        function show(){
            document.write('show!!<br>');
        }
        show();

        // 2. 익명 함수
        let output= function(){
            document.write('output!!<br>');
        }
        output();

        // 3. 화살표 함수 -- 위 익명함수의 function 키워드 사용하는게 불편함.(funtion을 줄임말)
        let display= () => {
            document.write('display!!<br>');
        }
        display();

        // 화살표 함수도 파라미터(매개변수) 사용 가능
        let display2= (name)=>{
            document.write('display2: '+ name + '<br>');
        }
        display2('sam');

        // 4. 화살표 함수의 축약표현법
        // 1) 파라미터가 1개라면 ...소괄호()를 생략할 수 있음.''

        let display3= name=>{
            document.write('display3 : '+ name + "<br>");

        }
        display3('robin');

        // 2) 만약 실행문이 1줄이면... {}도 생략할 수 있음.
        let display4= name=>document.write('display4 : '+ name + "<br>");
        display4('park');

        // 3) 파라미터가 0 개 이거나 2개 이상이면 소괄호 생략은 불가능.
        let display5= ()=>document.write('display5!!<br>');
        display5();

        let display6= (name, age)=>document.write('display6: ' + name + "," + age+ "<br>");
        display6('kim', 20);

    </script>

    <hr>
    <!-- 화살표 함수가 쓰이는 곳 [ 이벤트 처리용 함수, fetch().then ] -->
    <button id="b1">눌러 주세요</button>
    <h3 id="hh"></h3>

    <script>
        // 버튼 클릭이벤트 처리하기
        // 1. 예전방식
        let b1= document.getElementById('b1');
        b1.onclick= function(){
            document.getElementById('hh').innerHTML='clicked button!!';
        }

        // 화살표 함수로 처리
        b1.onclick= ()=>document.getElementById('hh').innerHTML='click!!!';
    </script>

    <hr>

    <button onclick="aaa()">서버 요청</button>
    <script>
        function aaa(){
            fetch('./aaa.php')
            .then(function(response){
                return response.text();
            })
            .then(function(text){
                alert(text);
            })

            // 화살표 함수로 바꿀 경우.
            fetch('./aaa.php')
            .then(response=>{
                return response.text();
            })
            .then(text=> alert(text));

             // 화살표 함수로... [리턴이 있는 실행문이 1줄일때 {}를 생략하려면.. return 도 생략 ; 도 생략]
            fetch('./aaa.php')
            .then(response=>response.text())
            .then(text=>alert(text));
        }
    </script>

    <hr>

    <!-- 화살표함수를 사용하는 또 다른 곳 [배열의 요소를 차례대로 접근할때.... ] -->
    <script>
        let bbb= [10, 20, 30];
        document.write(bbb[0] + "<br>");
        document.write(bbb[1] + "<br>");
        document.write(bbb + "<br>");  // 배열의 요소값을 , 구분자로 묶어서 문자열로 줌

        // 요소의 개수가 많으면 반복문으로 각 요소들에 접근함
        for(let i=0; i<bbb.length; i++){
            document.write(bbb[i] + "<br>");
        }
        document.write('<br>');

        // 위 for 문법은 개발자 실수의 가능성 많음
        for(let i in bbb){   // i : 0, 1, 2  인덱스번호로 사용 됨}
            document.write(bbb[i] +"<br>");
        }
        document.write('<br>');

        // 새로운 for of
        for(let n of bbb){   // 요소들
            document.write( n + "<br>");    
        }

        document.write("<br>");

        // 배열 자체에 본인의 멤버 각각에 대하여 차례로 접근하는 기능함수 새로 도입: ES6
        // .forEach() 파라미터에 전달한 함수가 요소개수만큼 자동 호출 됨.
        bbb.forEach(function(e, index, array){    // 이 함수를 3개 파라미터를 사용할 수 있음.[요소값, 인덱스, 배열]
            document.write(e + "<br>");
        });
        document.write("<br>");

        // 화살표함수로 변경
        bbb.forEach(e=>document.write(e+"<br>"));
        document.write("<br>");

        



    </script>

</body>
</html>