<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS map</title>
</head>
<body>

    <!-- 0. 카카오 개발자 사이트(developers.kakao.com)의 지도 API 사용 가이드 문서 따라서 제작(키 발급) -->
    <!-- [주의사항]. 웹 서버환경에서만 동작함. [dothome or Live Server] -->
    <h1>KAKAO MAP PAGE</h1>

    <!-- 1. 지도를 보여줄 요소 준비 [사이즈 지정 필수, 없으면 지도 안 보여줌] -->
    <div id="map" style="width: 100%; height: 500px;"></div>

    <!-- 2. 실제 지도를 불러오는 작업을 미리 코드로 작성해 놓았기에 이 스크립트를 적용 [발급 받은 키를 정확한 위치에 작성] -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b7cfd31c6dcea3227e81c10b9c6e5092&libraries=services"></script>
    
    <!-- 3. 원하는 지도 요청 작업 스크립팅 -->
    <script>
    var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
    var options = {        //지도를 생성할 때 필요한 기본 옵션
	    center: new kakao.maps.LatLng(37.54699, 127.09598), //지도의 중심좌표.
	    level: 4 //지도의 레벨(확대, 축소 정도)
    };

    var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴

    navigator.geolocation.getCurrentPosition(function(position){
        var lat= position.coords.latitude;
        var lng= position.coords.longitude;
        var myPos= new kakao.maps.LatLng(lat, lng);
        
        // 내 위치로 지도 부드럽게 변경
        map.panTo(myPos);

        // 첫번째 내 위치에 마커 표시
        var marker= new kakao.maps.Marker({
            position: myPos
        });
        // 마커가 보여질 지도를 설정.
        marker.setMap(map);

        var geocoder = new kakao.maps.services.Geocoder();

        geocoder.addressSearch('서울시 동작구 사당로20다길 26', function(result, status) {
            if(status === kakao.maps.services.Status.OK) {
                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
        
                // 두 번째 마커(마커 이미지 변경) - 상자 안으로 이동!
                var imageSrc="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png"; // 마커이미지의 주소입니다.
                var imageSize = new kakao.maps.Size(64, 69);  // 마커이미지의 크기입니다.
                var imageOption = {offset: new kakao.maps.Point(27, 69)};  // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 안에서의 좌표를 설정 합니다.
                var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
            
                var marker2= new kakao.maps.Marker({
                    map: map,
                    position: coords,
                    image: markerImage
                });

                marker2.setMap(map);
             
                } // if문 닫음.
        });
    });  // navigator.geolocation 끝나는 지점!

    </script>
    
</body>
</html>